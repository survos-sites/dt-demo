<?php

declare(strict_types=1);

namespace App\Entity;

use ApiPlatform\Doctrine\Orm\Filter\OrderFilter;
use ApiPlatform\Doctrine\Orm\Filter\SearchFilter;
use ApiPlatform\Metadata\ApiFilter;
use ApiPlatform\Metadata\ApiProperty;
use ApiPlatform\Metadata\ApiResource;
use ApiPlatform\Metadata\Get;
use ApiPlatform\Metadata\GetCollection;
use App\Repository\WineRepository;
use DateTimeImmutable;
use Doctrine\DBAL\Types\Types;
use Doctrine\ORM\Mapping\Column;
use Doctrine\ORM\Mapping\Entity;
use Doctrine\ORM\Mapping\Id;
use Survos\MeiliBundle\Metadata\MeiliIndex;
use Symfony\Component\Serializer\Attribute\Groups;

/**
 * @generated by code:entity
 * @source data/wine.jsonl
 */
#[Entity(repositoryClass: WineRepository::class)]
#[ApiResource(operations: [
	new Get(normalizationContext: ["groups" => ["wine.read"]]),
	new GetCollection(normalizationContext: ["groups" => ["wine.read"]]),
])]
#[ApiFilter(filterClass: SearchFilter::class, properties: self::FILTERABLE_FIELDS)]
#[ApiFilter(filterClass: SearchFilter::class, properties: self::SEARCHABLE_FIELDS)]
#[ApiFilter(filterClass: OrderFilter::class, properties: self::SORTABLE_FIELDS)]
#[MeiliIndex(
	primaryKey: 'code',
	filterable: self::FILTERABLE_FIELDS,
	sortable: self::SORTABLE_FIELDS,
	searchable: self::SEARCHABLE_FIELDS,
)]
final class Wine
{
	public const FILTERABLE_FIELDS = ['year', 'type', 'domain', 'quantity', 'price', 'quality'];
	public const SORTABLE_FIELDS = ['year', 'quantity', 'price', 'quality'];
	public const SEARCHABLE_FIELDS = [];

	/**
	 * Field: name
	 * total=1024, nulls=0, distinct=81
	 * length: 7–50 chars
	 * Top/First value: "Chateau Cote Montpezat Castillon Cuvee Compostelle"
	 */
	#[Column(length: 50, nullable: true)]
	#[ApiProperty(
		description: 'Field "name": types=[string], distinct=81, range=7–50 chars',
		example: '"Chateau Cote Montpezat Castillon Cuvee Compostelle"',
	)]
	#[Groups(groups: ['wine.read'])]
	public ?string $name = null;

	/**
	 * Field: year
	 * total=1024, nulls=0, distinct=14
	 * Top/First value: 2010
	 * Facet candidate
	 */
	#[Column(type: Types::INTEGER, nullable: true)]
	#[ApiProperty(description: 'Field "year": types=[int], distinct=14, facetCandidate', example: '2010')]
	#[Groups(groups: ['wine.read'])]
	public ?int $year = null;

	/**
	 * Field: type
	 * total=1024, nulls=0, distinct=2
	 * length: 3–5 chars
	 * Top/First value: "red"
	 * Facet candidate
	 * Boolean-like
	 */
	#[Column(length: 5, nullable: true)]
	#[ApiProperty(
		description: 'Field "type": types=[string], distinct=2, range=3–5 chars, facetCandidate, booleanLike',
		example: '"red"',
	)]
	#[Groups(groups: ['wine.read'])]
	public ?string $type = null;

	/**
	 * Field: domain
	 * total=1024, nulls=0, distinct=13
	 * length: 5–27 chars
	 * Top/First value: "Saint-Emilion"
	 * Facet candidate
	 */
	#[Column(length: 27, nullable: true)]
	#[ApiProperty(
		description: 'Field "domain": types=[string], distinct=13, range=5–27 chars, facetCandidate',
		example: '"Saint-Emilion"',
	)]
	#[Groups(groups: ['wine.read'])]
	public ?string $domain = null;

	/**
	 * Field: quantity
	 * total=1024, nulls=0, distinct=1
	 * Top/First value: 750
	 * Facet candidate
	 * Boolean-like
	 */
	#[Column(type: Types::INTEGER, nullable: true)]
	#[ApiProperty(description: 'Field "quantity": types=[int], distinct=1, facetCandidate, booleanLike', example: '750')]
	#[Groups(groups: ['wine.read'])]
	public ?int $quantity = null;

	/**
	 * Field: price
	 * total=1024, nulls=0, distinct=52
	 * Top/First value: 26
	 * Facet candidate
	 */
	#[Column(type: Types::INTEGER, nullable: true)]
	#[ApiProperty(description: 'Field "price": types=[int], distinct=52, facetCandidate', example: '26')]
	#[Groups(groups: ['wine.read'])]
	public ?int $price = null;

	/**
	 * Field: quality
	 * total=1024, nulls=0, distinct=14
	 * Top/First value: 90
	 * Facet candidate
	 */
	#[Column(type: Types::INTEGER, nullable: true)]
	#[ApiProperty(description: 'Field "quality": types=[int], distinct=14, facetCandidate', example: '90')]
	#[Groups(groups: ['wine.read'])]
	public ?int $quality = null;

	/**
	 * Field: image
	 * total=1024, nulls=0, distinct=501 (capped)
	 * length: 33–83 chars
	 * Top/First value: "/wine/Chateau-Cote-Montpezat-Castillon-Cuvee-Compostelle-2010-Saint-Emilion-0.jpg"
	 * Distinct counting capped in profile.
	 */
	#[Column(length: 254, nullable: true)]
	#[ApiProperty(
		description: 'Field "image": types=[string], distinct=501 (capped), range=33–83 chars',
		example: '"/wine/Chateau-Cote-Montpezat-Castillon-Cuvee-Compostelle-2010-Saint-Emilion-0.jpg"',
	)]
	#[Groups(groups: ['wine.read'])]
	public ?string $image = null;

	/**
	 * Field: code
	 * total=1024, nulls=0, distinct=501 (capped)
	 * length: 23–73 chars
	 * Top/First value: "Chateau-Cote-Montpezat-Castillon-Cuvee-Compostelle-2010-Saint-Emilion-0"
	 * Distinct counting capped in profile.
	 */
	#[Column(length: 73, nullable: true)]
	#[Id]
	#[ApiProperty(
		description: 'Field "code": types=[string], distinct=501 (capped), range=23–73 chars',
		example: '"Chateau-Cote-Montpezat-Castillon-Cuvee-Compostelle-2010-Saint-Emilion-0"',
	)]
	#[Groups(groups: ['wine.read'])]
	public ?string $code = null;
}
